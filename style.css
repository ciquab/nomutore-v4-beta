@charset "UTF-8";

/* =========================================
   Base Settings
   ========================================= */
html, body {
    height: 100%;
    margin: 0;
    padding: 0;
    overflow-x: hidden;
    /* スクロールバウンスの制御 (iOS) */
    overscroll-behavior-y: none; 
}

/* スクロールバーのカスタマイズ (Dark Mode対応) */
::-webkit-scrollbar {
    width: 6px;
    height: 6px;
}
::-webkit-scrollbar-track {
    background: transparent;
}
::-webkit-scrollbar-thumb {
    background-color: rgba(156, 163, 175, 0.5); /* gray-400 */
    border-radius: 3px;
}
.dark ::-webkit-scrollbar-thumb {
    background-color: rgba(75, 85, 99, 0.5); /* gray-600 */
}

/* =========================================
   v4 Core Design: Glassmorphism
   ========================================= */
.glass-panel {
    background: rgba(30, 41, 59, 0.7); /* Slate-800 based */
    backdrop-filter: blur(12px);
    -webkit-backdrop-filter: blur(12px);
    border: 1px solid rgba(255, 255, 255, 0.1);
}

.glass-nav {
    background: rgba(15, 23, 42, 0.85); /* Slate-900 based */
    backdrop-filter: blur(16px);
    -webkit-backdrop-filter: blur(16px);
    border-top: 1px solid rgba(255, 255, 255, 0.1);
}

/* ライトモード時の調整（Tailwindの dark: 修飾子で賄えない部分） */
html:not(.dark) .glass-panel {
    background: rgba(255, 255, 255, 0.6);
    border: 1px solid rgba(0, 0, 0, 0.05);
}
html:not(.dark) .glass-nav {
    background: rgba(255, 255, 255, 0.8);
    border-top: 1px solid rgba(0, 0, 0, 0.05);
}

/* =========================================
   v4 Orb Animation (Liquid)
   ========================================= */
.fluid-sphere {
    transform: translateZ(0); /* GPUアクセラレーション有効化 */
    /* 円形マスク：液漏れ防止の最終防壁 */
    mask-image: radial-gradient(circle, white 98%, transparent 100%);
    -webkit-mask-image: radial-gradient(circle, white 98%, transparent 100%);
}

.fluid-wave {
    position: absolute;
    left: -50%;
    width: 200%;
    height: 200%;
    border-radius: 40%; /* 楕円形にすることで回転時に波を生む */
    animation: wave-rotate 8s linear infinite;
    transition: top 1s cubic-bezier(0.4, 0, 0.2, 1), background 0.5s ease;
}

@keyframes wave-rotate {
    0% { transform: rotate(0deg); }
    100% { transform: rotate(360deg); }
}

/* =========================================
   Utility / Components
   ========================================= */

/* モーダルのトランジション */
.modal {
    transition: opacity 0.3s ease, visibility 0.3s;
}
.modal.hidden {
    opacity: 0;
    visibility: hidden;
    pointer-events: none;
    display: flex; /* flexレイアウトは維持しつつ隠す */
}
.modal:not(.hidden) {
    opacity: 1;
    visibility: visible;
    pointer-events: auto;
}

/* タイマー表示用フォント設定 (等幅数値) */
.font-mono-nums {
    font-feature-settings: "tnum";
    font-variant-numeric: tabular-nums;
}

/* ヘルプモーダルなどのスクロールエリア */
.custom-scrollbar::-webkit-scrollbar {
    width: 4px;
}
.custom-scrollbar::-webkit-scrollbar-track {
    background: rgba(255, 255, 255, 0.05);
}
.custom-scrollbar::-webkit-scrollbar-thumb {
    background: rgba(255, 255, 255, 0.2);
    border-radius: 2px;
}

/* ヒートマップのカレンダーセル */
.heatmap-cell {
    position: relative;
    touch-action: manipulation;
}